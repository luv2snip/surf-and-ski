<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resort Details - Peak2Wave</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="ski-page">
    <header class="compact ski-header">
        <h1 id="resortName">Loading...</h1>
        <p id="resortLocation"></p>
        <nav>
            <a href="index.html">Home</a>
            <a href="ski.html">All Resorts</a>
        </nav>
    </header>

    <main>
        <div class="resort-detail" id="resortDetail">
            <!-- Content loaded by JavaScript -->
        </div>

        <div class="resort-not-found" id="notFound" style="display: none;">
            <h2>Resort not found</h2>
            <p>The resort you're looking for doesn't exist.</p>
            <a href="ski.html" class="btn-back">Back to all resorts</a>
        </div>
    </main>

    <footer>
        <p>&copy; 2026 Peak2Wave - All rights reserved</p>
        <p class="instagram">Follow us: <a href="https://instagram.com/peak.2.wave" target="_blank">@peak.2.wave</a></p>
    </footer>

    <script src="data_ski_resort.js"></script>
    <script>
        // Get resort ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const resortId = urlParams.get('id');

        function loadResort() {
            const resort = getResortById(resortId);

            if (!resort) {
                document.getElementById('resortDetail').style.display = 'none';
                document.getElementById('notFound').style.display = 'block';
                document.getElementById('resortName').textContent = 'Not Found';
                document.title = 'Resort Not Found - Peak2Wave';
                return;
            }

            // Update page title
            document.title = `${resort.name} - Peak2Wave`;
            document.getElementById('resortName').textContent = resort.name;
            document.getElementById('resortLocation').textContent = `${resort.region}, ${resort.country}`;

            // Calculate snow/price ratio
            const snowRatio = (resort.snowBase.upper / resort.price).toFixed(2);

            // Build detail content
            const detailHTML = `
                <div class="resort-hero">
                    <div class="resort-badges">
                        ${resort.popular ? '<span class="badge badge-popular">Popular</span>' : ''}
                        ${resort.recentSnow > 20 ? '<span class="badge badge-snow">Fresh Snow</span>' : ''}
                    </div>
                </div>

                <div class="resort-grid">
                    <div class="resort-card">
                        <h3>Snow Conditions</h3>
                        <div class="stat-row">
                            <span class="stat-label">‚ùÑÔ∏è Snow Base</span>
                            <span class="stat-value">${resort.snowBase.lower} - ${resort.snowBase.upper} cm</span>
                        </div>
                        ${resort.recentSnow > 0 ? `
                        <div class="stat-row highlight">
                            <span class="stat-label">üÜï New Snow (7 days)</span>
                            <span class="stat-value">+${resort.recentSnow} cm</span>
                        </div>
                        ` : ''}
                    </div>

                    <div class="resort-card">
                        <h3>Altitude</h3>
                        <div class="stat-row">
                            <span class="stat-label">‚õ∞Ô∏è Base</span>
                            <span class="stat-value">${resort.altitude.min} m</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">üèîÔ∏è Summit</span>
                            <span class="stat-value">${resort.altitude.max} m</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">üìè Vertical Drop</span>
                            <span class="stat-value">${resort.altitude.max - resort.altitude.min} m</span>
                        </div>
                    </div>

                    <div class="resort-card">
                        <h3>Ski Area</h3>
                        <div class="stat-row">
                            <span class="stat-label">üéø Slopes</span>
                            <span class="stat-value">${resort.slopes} km</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">üö° Lifts</span>
                            <span class="stat-value">${resort.lifts}</span>
                        </div>
                    </div>

                    <div class="resort-card">
                        <h3>Pricing</h3>
                        <div class="stat-row">
                            <span class="stat-label">üí∂ Day Pass</span>
                            <span class="stat-value price">‚Ç¨${resort.price}</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">üìä Snow/Price Ratio</span>
                            <span class="stat-value">${snowRatio}</span>
                        </div>
                    </div>
                </div>

                <div class="resort-actions">
                    <a href="${resort.website}" target="_blank" rel="noopener noreferrer" class="btn-primary">
                        üåê Visit Official Website
                    </a>
                    <a href="ski.html" class="btn-secondary">
                        ‚Üê Back to all resorts
                    </a>
                </div>
            `;

            document.getElementById('resortDetail').innerHTML = detailHTML;
        }

        // Load resort on page load
        loadResort();
    </script>
</body>
</html>
